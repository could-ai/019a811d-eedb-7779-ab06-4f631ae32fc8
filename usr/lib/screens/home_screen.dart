import 'package:flutter/material.dart';\nimport '../models/transaction.dart';\nimport '../widgets/transaction_list.dart';\nimport '../widgets/summary_card.dart';\nimport 'add_transaction_screen.dart';\n\nclass HomeScreen extends StatefulWidget {\n  const HomeScreen({super.key});\n\n  @override\n  State<HomeScreen> createState() => _HomeScreenState();\n}\n\nclass _HomeScreenState extends State<HomeScreen> {\n  List<Transaction> transactions = [];\n\n  void _addTransaction(Transaction transaction) {\n    setState(() {\n      transactions.add(transaction);\n    });\n  }\n\n  void _deleteTransaction(String id) {\n    setState(() {\n      transactions.removeWhere((transaction) => transaction.id == id);\n    });\n  }\n\n  void _navigateToAddTransaction() async {\n    final result = await Navigator.push<Transaction>(\n      context,\n      MaterialPageRoute(\n        builder: (context) => const AddTransactionScreen(),\n      ),\n    );\n\n    if (result != null) {\n      _addTransaction(result);\n    }\n  }\n\n  double get totalIncome {\n    return transactions\n        .where((t) => t.type == TransactionType.income)\n        .fold(0, (sum, t) => sum + t.amount);\n  }\n\n  double get totalExpense {\n    return transactions\n        .where((t) => t.type == TransactionType.expense)\n        .fold(0, (sum, t) => sum + t.amount);\n  }\n\n  double get balance => totalIncome - totalExpense;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(\n        title: const Text('Finance Tracker'),\n        centerTitle: true,\n        elevation: 0,\n        backgroundColor: Theme.of(context).colorScheme.inversePrimary,\n      ),\n      body: Column(\n        children: [\n          // Summary Cards\n          Container(\n            color: Theme.of(context).colorScheme.inversePrimary.withOpacity(0.1),\n            padding: const EdgeInsets.all(16),\n            child: Column(\n              children: [\n                SummaryCard(\n                  title: 'Balance',\n                  amount: balance,\n                  color: balance >= 0 ? Colors.green : Colors.red,\n                  icon: Icons.account_balance_wallet,\n                ),\n                const SizedBox(height: 12),\n                Row(\n                  children: [\n                    Expanded(\n                      child: SummaryCard(\n                        title: 'Income',\n                        amount: totalIncome,\n                        color: Colors.green,\n                        icon: Icons.arrow_upward,\n                        compact: true,\n                      ),\n                    ),\n                    const SizedBox(width: 12),\n                    Expanded(\n                      child: SummaryCard(\n                        title: 'Expense',\n                        amount: totalExpense,\n                        color: Colors.red,\n                        icon: Icons.arrow_downward,\n                        compact: true,\n                      ),\n                    ),\n                  ],\n                ),\n              ],\n            ),\n          ),\n          // Transaction List\n          Expanded(\n            child: transactions.isEmpty\n                ? Center(\n                    child: Column(\n                      mainAxisAlignment: MainAxisAlignment.center,\n                      children: [\n                        Icon(\n                          Icons.receipt_long,\n                          size: 80,\n                          color: Colors.grey[300],\n                        ),\n                        const SizedBox(height: 16),\n                        Text(\n                          'No transactions yet',\n                          style: TextStyle(\n                            fontSize: 18,\n                            color: Colors.grey[600],\n                          ),\n                        ),\n                        const SizedBox(height: 8),\n                        Text(\n                          'Tap + to add your first transaction',\n                          style: TextStyle(\n                            fontSize: 14,\n                            color: Colors.grey[500],\n                          ),\n                        ),\n                      ],\n                    ),\n                  )\n                : TransactionList(\n                    transactions: transactions,\n                    onDelete: _deleteTransaction,\n                  ),\n          ),\n        ],\n      ),\n      floatingActionButton: FloatingActionButton.extended(\n        onPressed: _navigateToAddTransaction,\n        icon: const Icon(Icons.add),\n        label: const Text('Add Transaction'),\n      ),\n    );\n  }\n}